{"remainingRequest":"/Users/tim/Desktop/电商程序/package 2/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/tim/Desktop/电商程序/package 2/src/views/userMember/orderMember/index.vue?vue&type=style&index=0&id=6909cedb&scoped=true&lang=scss","dependencies":[{"path":"/Users/tim/Desktop/电商程序/package 2/src/views/userMember/orderMember/index.vue","mtime":1714158543178},{"path":"/Users/tim/Desktop/电商程序/package 2/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/tim/Desktop/电商程序/package 2/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/tim/Desktop/电商程序/package 2/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/tim/Desktop/电商程序/package 2/node_modules/sass-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/tim/Desktop/电商程序/package 2/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/tim/Desktop/电商程序/package 2/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgouc2VhcmNoIHsKICBwYWRkaW5nOiAzMHB4IDIwcHggMTBweCAyMHB4Owp9Ci5vcmRlci1tYWluIHsKICAuc2VhcmNoRm9ybSB7CiAgICA6OnYtZGVlcCAuZWwtZm9ybS1pdGVtIHsKICAgICAgbGFiZWwgewogICAgICAgIGZvbnQtd2VpZ2h0OiBub3JtYWw7CiAgICAgIH0KICAgIH0KICB9CiAgLmNhcmQgewogICAgbWFyZ2luOiAzMHB4OwogIH0KICAuc2VhcmNoLW1haW4gewogICAgLnNlYXJjaC1pbnB1dCB7CiAgICAgIHdpZHRoOiAyMDBweDsKICAgIH0KICB9CiAgLnRhYmxlX2ltZyB7CiAgICB3aWR0aDogMTAwcHg7CiAgICBoZWlnaHQ6IDEwMHB4OwogIH0KICAuc2VhcmNoQnRuX3dyYXBwZXIgewogICAgbWFyZ2luLXRvcDogMjBweDsKICAgIGRpc3BsYXk6IGZsZXg7CiAgICBmbGV4LWRpcmVjdGlvbjogcm93LXJldmVyc2U7CiAgfQp9Cg=="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyUA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/userMember/orderMember","sourcesContent":["<template>\n    <div class=\"order-main\">\n      <el-form\n        label-width=\"80px\"\n        :inline=\"false\"\n        class=\"search\"\n        size=\"normal\"\n      >\n        <el-row :gutter=\"10\">\n          <el-col class=\"searchItem\" :span=\"6\" :offset=\"0\">\n            <el-form-item label=\"用户名\" size=\"mini\">\n              <el-input\n                v-model=\"search.name\"\n                class=\"search-input\"\n                size=\"mini\"\n                placeholder=\"请输入姓名\"\n              />\n            </el-form-item>\n          </el-col>\n          <el-col class=\"searchItem\" :span=\"6\" :offset=\"0\">\n            <el-form-item label=\"性别\" size=\"mini\">\n              <el-select\n                v-model=\"search.sex\"\n                class=\"search-input\"\n                size=\"mini\"\n                clearable\n                placeholder=\"性别\"\n              >\n                <el-option label=\"男\" value=\"1\" />\n                <el-option label=\"女\" value=\"2\" />\n                <el-option label=\"全部\" value=\"0\" />\n              </el-select>\n            </el-form-item>\n          </el-col>\n          <el-col style=\"float: right\" :span=\"4\" :offset=\"0\">\n            <el-button type=\"primary\" size=\"mini\" @click=\"doSearch\"\n              >搜索</el-button\n            >\n            <el-button type=\"default\" size=\"mini\" @click=\"doReset\"\n              >重置\n            </el-button>\n          </el-col>\n        </el-row>\n      </el-form>\n      <!-- 订单列表 -->\n      <el-card class=\"card\" shadow=\"never\">\n        <el-table\n          :data=\"orderLists\"\n          border\n          style=\"width: 100%\"\n        >\n          <el-table-column type=\"index\" label=\"#\" fixed=\"left\" />\n\n          <el-table-column\n            align=\"center\"\n            label=\"姓名\"\n            prop=\"name\"\n            width=\"300\"\n          >\n          </el-table-column>\n\n          <el-table-column\n            align=\"center\"\n            label=\"性别\"\n            width=\"200\"\n          >\n            <template slot-scope=\"scope\">\n              <!-- <router-link></router-link> -->\n              <p v-if=\"scope.row.sex == 1\">男</p>\n              <p v-if=\"scope.row.sex == 2\">女</p>\n            </template>\n          </el-table-column>\n          <el-table-column\n            align=\"center\"\n            label=\"个性签名\"\n            prop=\"sign\"\n          >\n          </el-table-column>\n          <el-table-column\n            align=\"center\"\n            label=\"注册时间\"\n            prop=\"created_at\"\n            width=\"200\"\n          >\n          </el-table-column>\n          <el-table-column align=\"center\" label=\"冻结账户\" width=\"150\">\n            <template slot-scope=\"scope\">\n              <el-switch\n                @change=\"switchChange(scope.row)\"\n                v-model=\"scope.row.cool\"\n                active-color=\"#00c761\"\n              >\n              </el-switch>\n            </template>\n          </el-table-column>\n          <el-table-column align=\"center\" label=\"提升为管理员\" width=\"150\">\n            <template slot-scope=\"scope\">\n              <el-button type=\"primary\" @click=\"addadmin(scope.row)\">提升</el-button>\n            </template>\n          </el-table-column>\n          <el-table-column align=\"center\" label=\"删除\" width=\"150\">\n            <template slot-scope=\"scope\">\n              <el-button type=\"danger\" @click=\"deleteuser(scope.row.id)\">删除</el-button>\n            </template>\n          </el-table-column>\n        </el-table>\n\n       <!-- 所有列表都要有分页 除非有特殊要求 否则数据多的情况下就没办法看了 -->\n       <el-pagination\n          @size-change=\"handleSizeChange\"\n          @current-change=\"handleCurrentChange\"\n          :current-page=\"currentPage4\"\n          :page-sizes=\"[10, 20, 50, 100]\"\n          :page-size=\"limit\"\n          layout=\"total, sizes, prev, pager, next, jumper\"\n          :total=\"total\">\n        </el-pagination>\n      </el-card>\n    </div>\n\n  </template>\n\n  <script>\n  // import orderApi from \"@/api/order/index\";\n  // import mixin from \"@/mixins/index\";\n  import {\n    addAdmin,\n    couponDelete,\n    editAdmin,\n    getAdminList,\n    getRoleList,\n    memberDelete,\n    memberList,\n    memberUpdate\n  } from '@/api/api.js'\n  export default {\n    name: \"memberlist\",\n    data() {\n      return {\n        switchs: false,\n        loading: false,\n        orderLists: [], // 订单列表\n        currentPage4: 1,//当前页\n        limit: 10,//每页条数\n        page: 1,//页数\n        total: null,//总条数\n        roleList: [],\n        search: {\n          sex: '',\n          name: '',\n          keyword: ''\n        },\n\n        form: {\n          name: \"\",\n          password: \"\",\n          is_admin: \"1\",\n          user_salt:\"\",\n        },\n      };\n    },\n    computed: {},\n    created() {\n      this.getList()\n    },\n    methods: {\n      async getList() {\n        this.orderLists = []\n        this.roleList = []\n        let params = {\n          sex: this.search.sex,\n          name: this.search.name,\n          limit: this.limit,\n          page: this.currentPage4\n        };\n\n        const roleList = await getRoleList({ page: 1, limit: 50 });\n        console.log(roleList)\n\n        memberList(params).then( res => {\n          if(res.code === 1){\n            res.data.list.forEach(res => {\n              if(res.status == 1){\n                res.cool = false\n              } else {\n                res.cool = true\n              }\n            })\n            this.orderLists = res.data.list\n            console.log(this.orderLists)\n            this.total = res.data.count\n          }\n        })\n      },\n      // 冻结账号\n      switchChange(data) {\n        let status = ''\n        if(data.cool == false){\n          status = 1\n        } else {\n          status = 2\n        }\n        let params = {\n          id: data.id,\n          status: status\n        }\n        memberUpdate(params).then( res => {\n          if(res.code == 1){\n            if(status == 2){\n              this.$message({\n                message: '已冻结该用户',\n                type: 'success'\n              })\n            } else {\n              this.$message({\n                message: '已解冻该用户',\n                type: 'success'\n              })\n            }\n          }\n        })\n      },\n       //分页\n       handleSizeChange(val) {\n        console.log(`每页 ${val} 条`);\n        this.limit = val\n        this.getList()\n      },\n      handleCurrentChange(val) {\n        console.log(`当前页: ${val}`);\n        this.currentPage4 = val\n        this.getList()\n      },\n      // 重置搜索栏\n      doReset() {\n        this.search.keyword = ''\n        this.search.sex = ''\n        this.search.name = ''\n        this.currentPage4 = 1\n        this.limit = 10\n      },\n      // 搜索按钮\n      doSearch() {\n        this.getList()\n      },\n\n\n      deleteuser(id) {\n        this.$confirm('删除后无法恢复，确认删除?', '提示', {\n          confirmButtonText: '确定',\n          cancelButtonText: '取消',\n          type: 'warning'\n        }).then(() => {\n          let params = {\n            id: id\n          }\n          memberDelete(params).then(res => {\n            console.log(res)\n            if(res.code === 1) {\n              this.$message({\n                message: '删除成功',\n                type: 'success'\n              })\n              this.getList()\n            }\n          })\n        })\n      },\n\n\n      async addadmin(row) {\n        this.$confirm('是否提升为管理员?', '提示', {\n          confirmButtonText: '确定',\n          cancelButtonText: '取消',\n          type: 'warning'\n        }).then(() => {\n          let params = {\n            id: row.id\n          }\n          memberDelete(params).then(res => {\n            console.log(res)\n            if(res.code === 1) {\n              this.$message({\n                message: '成功',\n                type: 'success'\n              })\n              this.getList()\n            }\n          })\n        })\n        this.form.password = row.password;\n        this.form.name = row.name;\n        this.form.user_salt = row.user_salt;\n        const { name, desc } = this.form;\n        if (name.length < 1 && desc.length < 1) {\n          this.$message({\n            message: \"内容不能为空\",\n            type: \"warning\",\n          });\n          return;\n        }\n          // 验证是否有相同名称\n          if (this.roleList.some((item) => item.name === name)) {\n            this.$message({\n              message: \"已有相同用户名\",\n              type: \"warning\",\n            });\n            return;\n          }\n          const res = await addAdmin(this.form);\n          if (res.code === 1) {\n            // this.$message({\n            //   message: \"添加成功\",\n            //   type: \"success\",\n            // });\n          }\n        // 更新页面\n        this.getList();\n      },\n\n    },\n  };\n\n\n\n\n  </script>\n\n  <style  scoped lang=\"scss\">\n  .search {\n    padding: 30px 20px 10px 20px;\n  }\n  .order-main {\n    .searchForm {\n      ::v-deep .el-form-item {\n        label {\n          font-weight: normal;\n        }\n      }\n    }\n    .card {\n      margin: 30px;\n    }\n    .search-main {\n      .search-input {\n        width: 200px;\n      }\n    }\n    .table_img {\n      width: 100px;\n      height: 100px;\n    }\n    .searchBtn_wrapper {\n      margin-top: 20px;\n      display: flex;\n      flex-direction: row-reverse;\n    }\n  }\n  </style>\n"]}]}