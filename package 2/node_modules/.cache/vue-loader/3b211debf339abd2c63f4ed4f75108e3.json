{"remainingRequest":"/Users/tim/Desktop/电商程序/package 2/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/tim/Desktop/电商程序/package 2/src/views/userMember/identity/index.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/tim/Desktop/电商程序/package 2/src/views/userMember/identity/index.vue","mtime":499162500000},{"path":"/Users/tim/Desktop/电商程序/package 2/node_modules/cache-loader/dist/cjs.js","mtime":1713682101844},{"path":"/Users/tim/Desktop/电商程序/package 2/node_modules/babel-loader/lib/index.js","mtime":1713682103243},{"path":"/Users/tim/Desktop/电商程序/package 2/node_modules/cache-loader/dist/cjs.js","mtime":1713682101844},{"path":"/Users/tim/Desktop/电商程序/package 2/node_modules/vue-loader/lib/index.js","mtime":1713682103513}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7CiAgZ2V0UGVybWlzc2lvbkxpc3QsCiAgYWRkUGVybWlzc2lvbiwKICBkZWxldGVQZXJtaXNzaW9uLAogIGVkaXRQZXJtaXNzaW9uLAp9IGZyb20gIkAvYXBpL2FwaS5qcyI7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAicm9sZUxpc3QiLAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICByb2xlTGlzdDogW10sIC8vIOWIl+ihqAogICAgICBjdXJyZW50UGFnZTogMSwgLy/lvZPliY3pobUKICAgICAgbGltaXQ6IDEwLCAvL+avj+mhteadoeaVsAogICAgICBwYWdlOiAxLCAvL+mhteaVsAogICAgICB0b3RhbDogbnVsbCwgLy/mgLvmnaHmlbAKICAgICAgZGlhbG9nRm9ybVZpc2libGU6IGZhbHNlLCAvLyDmjqfliLbmlrDlop7lvLnlh7rmoYYKICAgICAgaXNFZGl0OiBmYWxzZSwgLy8g5piv5ZCm5piv57yW6L6RCiAgICAgIGVkaXRJZDogIiIsIC8vIOW9k+WJjee8lui+kWlkCiAgICAgIHNlYXJjaDogewogICAgICAgIGtleXdvcmQ6ICIiLAogICAgICAgIHRpbWVyOiBudWxsLCAvLyDoioLmtYEKICAgICAgfSwKICAgICAgLyoqCiAgICAgICAqIOihqOWNlemqjOivgQogICAgICAgKi8KICAgICAgcnVsZXM6IHsKICAgICAgICBuYW1lOiBbeyByZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogIuivt+i+k+WFpeWQjeensCIsIHRyaWdnZXI6ICJibHVyIiB9XSwKICAgICAgICBwYXRoOiBbeyByZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogIuivt+i+k+WFpeadg+mZkCIsIHRyaWdnZXI6ICJibHVyIiB9XSwKICAgICAgfSwKICAgICAgLyoqCiAgICAgICAqIOaWsOWinmZvcm0KICAgICAgICovCiAgICAgIGZvcm06IHsKICAgICAgICBuYW1lOiAiIiwKICAgICAgICBwYXRoOiAiIiwKICAgICAgfSwKICAgIH07CiAgfSwKICBjb21wdXRlZDoge30sCiAgY3JlYXRlZCgpIHsKICAgIHRoaXMuZ2V0TGlzdCgpOwogIH0sCiAgd2F0Y2g6IHsKICAgIGRpYWxvZ0Zvcm1WaXNpYmxlKG5ld1ZhbCkgewogICAgICBpZiAoIW5ld1ZhbCkgewogICAgICAgIC8vIOa4heepuuihqOWNleaVsOaNru+8jOaBouWkjeWIneWni+aVsOaNrgogICAgICAgIE9iamVjdC5hc3NpZ24odGhpcy4kZGF0YS5mb3JtLCB0aGlzLiRvcHRpb25zLmRhdGEoKS5mb3JtKTsKICAgICAgfQogICAgfSwKICB9LAogIG1ldGhvZHM6IHsKICAgIGFzeW5jIGdldExpc3QoKSB7CiAgICAgIHRoaXMucm9sZUxpc3QgPSBbXTsKICAgICAgbGV0IHBhcmFtcyA9IHsKICAgICAgICAvKioKICAgICAgICAgKiDnqbrlgLzmmL7npLrmiYDmnIkKICAgICAgICAgKi8KICAgICAgICBrZXl3b3JkOiB0aGlzLnNlYXJjaC5rZXl3b3JkLAogICAgICAgIGxpbWl0OiB0aGlzLmxpbWl0LAogICAgICAgIHBhZ2U6IHRoaXMuY3VycmVudFBhZ2UsCiAgICAgIH07CiAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IGdldFBlcm1pc3Npb25MaXN0KHBhcmFtcyk7CiAgICAgIGNvbnNvbGUubG9nKHJlcyk7CiAgICAgIGNvbnNvbGUudGFibGUocmVzLmRhdGEubGlzdCk7CiAgICAgIGlmIChyZXMuY29kZSA9PT0gMSkgewogICAgICAgIGlmIChyZXMuZGF0YS5saXN0Lmxlbmd0aCA+IDApIHsKICAgICAgICAgIHRoaXMucm9sZUxpc3QgPSByZXMuZGF0YS5saXN0OwogICAgICAgICAgdGhpcy50b3RhbCA9IHJlcy5kYXRhLmNvdW50OwogICAgICAgIH0KICAgICAgfQogICAgfSwKICAgIC8v5YiG6aG1CiAgICBoYW5kbGVTaXplQ2hhbmdlKHZhbCkgewogICAgICBjb25zb2xlLmxvZyhg5q+P6aG1ICR7dmFsfSDmnaFgKTsKICAgICAgdGhpcy5saW1pdCA9IHZhbDsKICAgICAgdGhpcy5nZXRMaXN0KCk7CiAgICB9LAogICAgaGFuZGxlQ3VycmVudENoYW5nZSh2YWwpIHsKICAgICAgY29uc29sZS5sb2coYOW9k+WJjemhtTogJHt2YWx9YCk7CiAgICAgIHRoaXMuY3VycmVudFBhZ2UgPSB2YWw7CiAgICAgIHRoaXMuZ2V0TGlzdCgpOwogICAgfSwKICAgIC8vIOmHjee9ruaQnOe0ouagjwogICAgZG9SZXNldCgpIHsKICAgICAgdGhpcy5zZWFyY2gua2V5d29yZCA9ICIiOwogICAgICB0aGlzLmN1cnJlbnRQYWdlID0gMTsKICAgICAgdGhpcy5saW1pdCA9IDEwOwogICAgICB0aGlzLmdldExpc3QoKTsKICAgIH0sCiAgICAvLyDmkJzntKLmjInpkq4KICAgIGRvU2VhcmNoKCkgewogICAgICBpZiAodGhpcy5zZWFyY2gua2V5d29yZC5sZW5ndGggPiAwKSB7CiAgICAgICAgLy8gMnPoioLmtYEKICAgICAgICBpZiAoIXRoaXMuc2VhcmNoLnRpbWVyKSB7CiAgICAgICAgICB0aGlzLnNlYXJjaC50aW1lciA9IHNldFRpbWVvdXQoKCkgPT4gewogICAgICAgICAgICBjbGVhclRpbWVvdXQodGhpcy5zZWFyY2gudGltZXIpOwogICAgICAgICAgICB0aGlzLnNlYXJjaC50aW1lciA9IG51bGw7CiAgICAgICAgICB9LCAyMDAwKTsKICAgICAgICAgIHRoaXMuZ2V0TGlzdCgpOwogICAgICAgIH0KICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLiRtZXNzYWdlKHsKICAgICAgICAgIG1lc3NhZ2U6ICLor7fovpPlhaXmkJzntKLlhbPplK7lrZciLAogICAgICAgICAgdHlwZTogIndhcm5pbmciLAogICAgICAgIH0pOwogICAgICB9CiAgICB9LAogICAgLyoqCiAgICAgKiDmlrDlop7mjInpkq7kuovku7bvvIzmlrDlop7kuovku7YKICAgICAqLwogICAgYXN5bmMgYWRkUm9sZUhhbmRsZXIoKSB7CiAgICAgIHRoaXMuZGlhbG9nRm9ybVZpc2libGUgPSB0cnVlOwogICAgfSwKICAgIC8qKgogICAgICog5paw5aKe6KGo5Y2VIC0g5Y+W5raI5LqL5Lu2CiAgICAgKi8KICAgIGFkZFJvbGVGb3JtQ2FuY2VsKCkgewogICAgICAvLyDlhbPpl63ooajljZUKICAgICAgdGhpcy5kaWFsb2dGb3JtVmlzaWJsZSA9IGZhbHNlOwogICAgfSwKICAgIC8qKgogICAgICog5paw5aKe6KGo5Y2VIC0g56Gu5a6a5LqL5Lu2CiAgICAgKi8KICAgIGFzeW5jIGFkZFJvbGVGb3JtT2soKSB7CiAgICAgIGNvbnN0IHsgbmFtZSwgZGVzYyB9ID0gdGhpcy5mb3JtOwogICAgICBpZiAobmFtZS5sZW5ndGggPCAxICYmIGRlc2MubGVuZ3RoIDwgMSkgewogICAgICAgIHRoaXMuJG1lc3NhZ2UoewogICAgICAgICAgbWVzc2FnZTogIuWGheWuueS4jeiDveS4uuepuiIsCiAgICAgICAgICB0eXBlOiAid2FybmluZyIsCiAgICAgICAgfSk7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIC8vIOaYr+e8lui+kei/m+adpeeahAogICAgICBpZiAodGhpcy5pc0VkaXQpIHsKICAgICAgICAvLyDmn6XnnIvmlLnnmoTlkI3lrZfmmK/lkKbmnInph43lpI0KICAgICAgICBpZiAoCiAgICAgICAgICB0aGlzLnJvbGVMaXN0CiAgICAgICAgICAgIC5maWx0ZXIoKGl0ZW0pID0+IGl0ZW0uaWQgIT09IHRoaXMuZWRpdElkKQogICAgICAgICAgICAuc29tZSgoaXRlbSkgPT4gaXRlbS5uYW1lID09PSBuYW1lKQogICAgICAgICkgewogICAgICAgICAgdGhpcy4kbWVzc2FnZSh7CiAgICAgICAgICAgIG1lc3NhZ2U6ICLlt7LmnInnm7jlkIzlkI3np7AiLAogICAgICAgICAgICB0eXBlOiAid2FybmluZyIsCiAgICAgICAgICB9KTsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAgICAgY29uc3QgcmVzID0gYXdhaXQgZWRpdFBlcm1pc3Npb24oeyAuLi50aGlzLmZvcm0sIGlkOiB0aGlzLmVkaXRJZCB9KTsKICAgICAgICBpZiAocmVzLmNvZGUgPT09IDEpIHsKICAgICAgICAgIHRoaXMuJG1lc3NhZ2UoewogICAgICAgICAgICBtZXNzYWdlOiAi5L+u5pS55oiQ5YqfIiwKICAgICAgICAgICAgdHlwZTogInN1Y2Nlc3MiLAogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9IGVsc2UgewogICAgICAgIC8vIOmqjOivgeaYr+WQpuacieebuOWQjOWQjeensAogICAgICAgIGlmICh0aGlzLnJvbGVMaXN0LnNvbWUoKGl0ZW0pID0+IGl0ZW0ubmFtZSA9PT0gbmFtZSkpIHsKICAgICAgICAgIHRoaXMuJG1lc3NhZ2UoewogICAgICAgICAgICBtZXNzYWdlOiAi5bey5pyJ55u45ZCM5ZCN56ewIiwKICAgICAgICAgICAgdHlwZTogIndhcm5pbmciLAogICAgICAgICAgfSk7CiAgICAgICAgICByZXR1cm47CiAgICAgICAgfQogICAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IGFkZFBlcm1pc3Npb24odGhpcy5mb3JtKTsKICAgICAgICBpZiAocmVzLmNvZGUgPT09IDEpIHsKICAgICAgICAgIHRoaXMuJG1lc3NhZ2UoewogICAgICAgICAgICBtZXNzYWdlOiAi5re75Yqg5oiQ5YqfIiwKICAgICAgICAgICAgdHlwZTogInN1Y2Nlc3MiLAogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9CiAgICAgIC8vIOWFs+mXreihqOWNlQogICAgICB0aGlzLmRpYWxvZ0Zvcm1WaXNpYmxlID0gZmFsc2U7CiAgICAgIC8vIOabtOaWsOmhtemdogogICAgICB0aGlzLmdldExpc3QoKTsKICAgIH0sCiAgICAvKioKICAgICAqIOe8lui+keS6i+S7tgogICAgICovCiAgICBlZGl0Um9sZUhhbmRsZXIocm9sZSkgewogICAgICBjb25zb2xlLmxvZyhyb2xlKTsKICAgICAgdGhpcy5pc0VkaXQgPSB0cnVlOwogICAgICB0aGlzLmVkaXRJZCA9IHJvbGUuaWQ7CiAgICAgIHRoaXMuZm9ybS5uYW1lID0gcm9sZS5uYW1lOwogICAgICB0aGlzLmZvcm0ucGF0aCA9IHJvbGUucGF0aDsKICAgICAgdGhpcy5kaWFsb2dGb3JtVmlzaWJsZSA9IHRydWU7CiAgICB9LAogICAgLyoqCiAgICAgKiDliKDpmaTkuovku7YKICAgICAqLwogICAgZGVsZXRlUm9sZUhhbmRsZXIoaWQpIHsKICAgICAgY29uc29sZS5sb2coaWQpOwogICAgICB0aGlzLiRjb25maXJtKCLmraTmk43kvZzlsIbmsLjkuYXliKDpmaTor6XmnYPpmZAsIOaYr+WQpue7p+e7rT8iLCAi5o+Q56S6IiwgewogICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiAi56Gu5a6aIiwKICAgICAgICBjYW5jZWxCdXR0b25UZXh0OiAi5Y+W5raIIiwKICAgICAgICB0eXBlOiAid2FybmluZyIsCiAgICAgIH0pCiAgICAgICAgLnRoZW4oYXN5bmMgKCkgPT4gewogICAgICAgICAgdGhpcy4kbWVzc2FnZSh7CiAgICAgICAgICAgIHR5cGU6ICJzdWNjZXNzIiwKICAgICAgICAgICAgbWVzc2FnZTogIuWIoOmZpOaIkOWKnyEiLAogICAgICAgICAgfSk7CiAgICAgICAgICBjb25zdCByZXMgPSBhd2FpdCBkZWxldGVQZXJtaXNzaW9uKGlkKTsKICAgICAgICAgIGlmIChyZXMuY29kZSA9PT0gMSkgewogICAgICAgICAgICBjb25zb2xlLmxvZyhyZXMpOwogICAgICAgICAgICAvLyDmm7TmlrDpobXpnaIKICAgICAgICAgICAgdGhpcy5nZXRMaXN0KCk7CiAgICAgICAgICB9CiAgICAgICAgfSkKICAgICAgICAuY2F0Y2goKCkgPT4gewogICAgICAgICAgdGhpcy4kbWVzc2FnZSh7CiAgICAgICAgICAgIHR5cGU6ICJpbmZvIiwKICAgICAgICAgICAgbWVzc2FnZTogIuW3suWPlua2iOWIoOmZpCIsCiAgICAgICAgICB9KTsKICAgICAgICB9KTsKICAgIH0sCiAgfSwKfTsK"},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/userMember/identity","sourcesContent":["<template>\n  <div class=\"order-main\">\n    <el-form label-width=\"80px\" :inline=\"false\" class=\"search\" size=\"normal\">\n      <el-row :gutter=\"10\">\n        <el-col class=\"searchItem\" :span=\"6\" :offset=\"0\">\n          <el-form-item label=\"名称\" size=\"mini\">\n            <el-input\n              v-model=\"search.keyword\"\n              class=\"search-input\"\n              size=\"mini\"\n              placeholder=\"请输入关键字\"\n            />\n          </el-form-item>\n        </el-col>\n        <el-col class=\"searchItem\" :span=\"6\" :offset=\"0\"> </el-col>\n        <el-col style=\"float: right\" :span=\"4\" :offset=\"0\">\n          <el-button type=\"primary\" size=\"mini\" @click=\"doSearch()\"\n            >搜索</el-button\n          >\n          <el-button type=\"default\" size=\"mini\" @click=\"doReset()\"\n            >重置\n          </el-button>\n        </el-col>\n      </el-row>\n    </el-form>\n    <div class=\"btn-box\">\n      <el-button type=\"primary\" size=\"mini\" @click=\"addRoleHandler()\"\n        >新增</el-button\n      >\n      <!-- 嵌套表单 -->\n      <el-dialog\n        :title=\"isEdit ? '编辑权限' : '新增权限'\"\n        :visible.sync=\"dialogFormVisible\"\n      >\n        <el-form :model=\"form\" :rules=\"rules\">\n          <el-form-item label=\"名称\" prop=\"name\">\n            <el-input v-model.trim=\"form.name\"></el-input>\n          </el-form-item>\n          <el-form-item label=\"权限\" prop=\"path\">\n            <el-input v-model.trim=\"form.path\"></el-input>\n          </el-form-item>\n        </el-form>\n        <div slot=\"footer\" class=\"dialog-footer\">\n          <el-button @click=\"addRoleFormCancel()\">取 消</el-button>\n          <el-button type=\"primary\" @click=\"addRoleFormOk()\">确 定</el-button>\n        </div>\n      </el-dialog>\n    </div>\n    <!-- 订单列表 -->\n    <el-card class=\"card\" shadow=\"never\">\n      <el-table :data=\"roleList\" border style=\"width: 100%\">\n        <el-table-column align=\"center\" type=\"index\" label=\"#\" fixed=\"left\" />\n        <el-table-column align=\"center\" label=\"id\" prop=\"id\" width=\"100\" />\n        <el-table-column align=\"center\" label=\"名称\" prop=\"name\" />\n        <el-table-column align=\"center\" label=\"权限\" prop=\"path\" />\n        <el-table-column\n          align=\"center\"\n          label=\"创建时间\"\n          prop=\"created_at\"\n          width=\"200\"\n        />\n        <el-table-column\n          align=\"center\"\n          label=\"更新时间\"\n          prop=\"updated_at\"\n          width=\"200\"\n        />\n        <el-table-column align=\"center\" label=\"操作\" width=\"200\">\n          <template slot-scope=\"scope\">\n            <!-- 编辑按钮 -->\n            <el-button\n              type=\"primary\"\n              size=\"mini\"\n              icon=\"el-icon-edit\"\n              @click=\"editRoleHandler(scope.row)\"\n              circle\n            />\n            <!-- 删除按钮 -->\n            <el-button\n              type=\"danger\"\n              size=\"mini\"\n              icon=\"el-icon-delete\"\n              @click=\"deleteRoleHandler(scope.row.id)\"\n              circle\n            />\n          </template>\n        </el-table-column>\n      </el-table>\n\n      <!-- 所有列表都要有分页 除非有特殊要求 否则数据多的情况下就没办法看了 -->\n      <el-pagination\n        @size-change=\"handleSizeChange\"\n        @current-change=\"handleCurrentChange\"\n        :current-page=\"currentPage\"\n        :page-sizes=\"[10, 20, 50, 100]\"\n        :page-size=\"limit\"\n        layout=\"total, sizes, prev, pager, next, jumper\"\n        :total=\"total\"\n      >\n      </el-pagination>\n    </el-card>\n  </div>\n</template>\n\n<script>\nimport {\n  getPermissionList,\n  addPermission,\n  deletePermission,\n  editPermission,\n} from \"@/api/api.js\";\nexport default {\n  name: \"roleList\",\n  data() {\n    return {\n      roleList: [], // 列表\n      currentPage: 1, //当前页\n      limit: 10, //每页条数\n      page: 1, //页数\n      total: null, //总条数\n      dialogFormVisible: false, // 控制新增弹出框\n      isEdit: false, // 是否是编辑\n      editId: \"\", // 当前编辑id\n      search: {\n        keyword: \"\",\n        timer: null, // 节流\n      },\n      /**\n       * 表单验证\n       */\n      rules: {\n        name: [{ required: true, message: \"请输入名称\", trigger: \"blur\" }],\n        path: [{ required: true, message: \"请输入权限\", trigger: \"blur\" }],\n      },\n      /**\n       * 新增form\n       */\n      form: {\n        name: \"\",\n        path: \"\",\n      },\n    };\n  },\n  computed: {},\n  created() {\n    this.getList();\n  },\n  watch: {\n    dialogFormVisible(newVal) {\n      if (!newVal) {\n        // 清空表单数据，恢复初始数据\n        Object.assign(this.$data.form, this.$options.data().form);\n      }\n    },\n  },\n  methods: {\n    async getList() {\n      this.roleList = [];\n      let params = {\n        /**\n         * 空值显示所有\n         */\n        keyword: this.search.keyword,\n        limit: this.limit,\n        page: this.currentPage,\n      };\n      const res = await getPermissionList(params);\n      console.log(res);\n      console.table(res.data.list);\n      if (res.code === 1) {\n        if (res.data.list.length > 0) {\n          this.roleList = res.data.list;\n          this.total = res.data.count;\n        }\n      }\n    },\n    //分页\n    handleSizeChange(val) {\n      console.log(`每页 ${val} 条`);\n      this.limit = val;\n      this.getList();\n    },\n    handleCurrentChange(val) {\n      console.log(`当前页: ${val}`);\n      this.currentPage = val;\n      this.getList();\n    },\n    // 重置搜索栏\n    doReset() {\n      this.search.keyword = \"\";\n      this.currentPage = 1;\n      this.limit = 10;\n      this.getList();\n    },\n    // 搜索按钮\n    doSearch() {\n      if (this.search.keyword.length > 0) {\n        // 2s节流\n        if (!this.search.timer) {\n          this.search.timer = setTimeout(() => {\n            clearTimeout(this.search.timer);\n            this.search.timer = null;\n          }, 2000);\n          this.getList();\n        }\n      } else {\n        this.$message({\n          message: \"请输入搜索关键字\",\n          type: \"warning\",\n        });\n      }\n    },\n    /**\n     * 新增按钮事件，新增事件\n     */\n    async addRoleHandler() {\n      this.dialogFormVisible = true;\n    },\n    /**\n     * 新增表单 - 取消事件\n     */\n    addRoleFormCancel() {\n      // 关闭表单\n      this.dialogFormVisible = false;\n    },\n    /**\n     * 新增表单 - 确定事件\n     */\n    async addRoleFormOk() {\n      const { name, desc } = this.form;\n      if (name.length < 1 && desc.length < 1) {\n        this.$message({\n          message: \"内容不能为空\",\n          type: \"warning\",\n        });\n        return;\n      }\n      // 是编辑进来的\n      if (this.isEdit) {\n        // 查看改的名字是否有重复\n        if (\n          this.roleList\n            .filter((item) => item.id !== this.editId)\n            .some((item) => item.name === name)\n        ) {\n          this.$message({\n            message: \"已有相同名称\",\n            type: \"warning\",\n          });\n          return;\n        }\n        const res = await editPermission({ ...this.form, id: this.editId });\n        if (res.code === 1) {\n          this.$message({\n            message: \"修改成功\",\n            type: \"success\",\n          });\n        }\n      } else {\n        // 验证是否有相同名称\n        if (this.roleList.some((item) => item.name === name)) {\n          this.$message({\n            message: \"已有相同名称\",\n            type: \"warning\",\n          });\n          return;\n        }\n        const res = await addPermission(this.form);\n        if (res.code === 1) {\n          this.$message({\n            message: \"添加成功\",\n            type: \"success\",\n          });\n        }\n      }\n      // 关闭表单\n      this.dialogFormVisible = false;\n      // 更新页面\n      this.getList();\n    },\n    /**\n     * 编辑事件\n     */\n    editRoleHandler(role) {\n      console.log(role);\n      this.isEdit = true;\n      this.editId = role.id;\n      this.form.name = role.name;\n      this.form.path = role.path;\n      this.dialogFormVisible = true;\n    },\n    /**\n     * 删除事件\n     */\n    deleteRoleHandler(id) {\n      console.log(id);\n      this.$confirm(\"此操作将永久删除该权限, 是否继续?\", \"提示\", {\n        confirmButtonText: \"确定\",\n        cancelButtonText: \"取消\",\n        type: \"warning\",\n      })\n        .then(async () => {\n          this.$message({\n            type: \"success\",\n            message: \"删除成功!\",\n          });\n          const res = await deletePermission(id);\n          if (res.code === 1) {\n            console.log(res);\n            // 更新页面\n            this.getList();\n          }\n        })\n        .catch(() => {\n          this.$message({\n            type: \"info\",\n            message: \"已取消删除\",\n          });\n        });\n    },\n  },\n};\n</script>\n\n<style scoped lang=\"scss\">\n.btn-box {\n  margin: 0px 30px;\n}\n.search {\n  padding: 30px 20px 10px 20px;\n}\n.order-main {\n  .searchForm {\n    ::v-deep .el-form-item {\n      label {\n        font-weight: normal;\n      }\n    }\n  }\n  .card {\n    margin: 10px 30px;\n  }\n  .search-main {\n    .search-input {\n      width: 200px;\n    }\n  }\n  .table_img {\n    width: 100px;\n    height: 100px;\n  }\n  .searchBtn_wrapper {\n    margin-top: 20px;\n    display: flex;\n    flex-direction: row-reverse;\n  }\n}\n</style>\n"]}]}